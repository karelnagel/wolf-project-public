---
import { db } from "@wolf-project/db";
import Layout from "../../components/Layout.astro";
import { ModifyUser } from "../../components/ModifyUser";

const { userId } = Astro.params;
if (!userId) throw new Error("User id is required");

const user = await db.query.usersTable.findFirst({
  where: (x, { eq }) => eq(x.id, userId),
});

if (user === undefined) throw new Error("No User found!");
---

<Layout title={undefined} description={undefined}>
  <h1>{user.name} kasutaja informatsioon</h1><ModifyUser
    userId={userId}
    user={user}
    client:load
  /></Layout
>
